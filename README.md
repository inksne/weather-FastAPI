## Погода

Приложение для получения погоды в любом городе мира.

## Руководство по эксплуатации (для тестов ниже)

- В корне проекта создаем файл .env
- В него добавляем переменные ```DB_HOST```, ```DB_PORT```, ```DB_USER```, ```DB_PASS```, ```DB_NAME```, ```MODE``` и ```TOKEN```
- Сохраняем и далее скачиваем все пакеты, которые перечислены в requirements.txt
- Переходим в каталог нашего проекта через терминал и вводим комманду
```uvicorn main:app```
- Довольствуемся результатом

## Документация

`auth`

Каталог с файлами для создания access и refresh токена для аутентификации.
Также содержит функции для этой самой аутентификации.

`certs`

Каталог с приватным и публичным ключами, так как алгоритм RS256.

`database`

Каталог с подключением к бд и моделями бд.

`templates`

Каталог с html-страницами и файлом ```router.py```
В файле идет подключение всех этих html-страниц и взаимодействие с бд.
Также именно в нем обрабатываются погодные запросы и сохранение истории запросов.

`tests & pytest.ini`

Внутри файл с тестами, файл для получения переменных окружения и .env (создайте его).

Чтобы запустить тесты необходимо:
- В database/database.py убрать комментарий с декоратора
- Создать .env для тестовой бд (укажите MODE=TEST) в одном каталоге с тестами
- Раскомментить импорты из .env и закомментить .env
- Запускать тесты с помощью команды: pytest -k 'test_name'

В pytest.ini конфигурация для pytest

`weather`

Разделен на 4 файла:
- ```config.py``` с урлом на api gismeteo и константой для округления координат
- ```exceptions.py``` с двумя классами-исключениями
- ```weather_api_service``` с получением данных о погоде из api gismeteo, основной файл в этом каталоге
- ```weather_formatter``` для форматирвоания полученных данных в строку

`config.py`

Получение переменных окружения из ```.env```
Также имеется класс с настройками для JWT и бд.

`main.py`

Основной файл с созданием приложения, корсами, подключением роутеров и функциями для регистрации и поиска

`Dockerfile & Procfile`

Файлы для деплоя на https://render.com/

## Примечание

Для получения api ключика напишите gismeteo на их почту: b2b@gismeteo.ru

Ссылочка: https://weather-d9sy.onrender.com
Но платный тариф может слететь, и сайт не будет доступен.

Можете распространять код, делать с ним что угодно, если будут вопросы, то вот почта:
inksne@gmail.com
